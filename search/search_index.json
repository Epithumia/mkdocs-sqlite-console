{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"MkDocs-SQLite-Console","text":"<p>Mkdocs-SQLite-Console est un plugin pour MkDocs, qui permet d'afficher un IDE SQL (SQLite) permettant d'ex\u00e9cuter du code. Le public vis\u00e9 est essentiellement les enseignants et \u00e9tudiants : les premiers pourront ainsi placer du code que les seconds pourront ex\u00e9cuter et ainsi voir le r\u00e9sultat de leur requ\u00eate.</p>"},{"location":"#installation","title":"Installation","text":"<p>Installer le plugin avec pip :</p> <p><code>python3 -m pip install mkdocs-sqlite-console</code></p> <p>Pour acc\u00e9der \u00e0 la documentation :</p> <pre><code>git clone git+https://github.com/Epithumia/mkdocs-sqlite-console.git\ncd mkdocs-sqlite-console\npython3 -m pip install .[docs]\nmkdocs build\n</code></pre> <p>Puis dans le dossier <code>docs</code>, activer le plugin dans votre fichier <code>mkdocs.yml</code>:</p> <pre><code>plugins:\n  - search\n  - sqlite-console\n</code></pre> <p>Note</p> <p>Si vous n'avez aucune entr\u00e9e dans la section <code>plugins</code> de votre fichier de configuration, vous voudrez sans doute ajouter le plugin <code>search</code>. MkDocs l'active par d\u00e9faut s'il n'y a pas d'autres <code>plugins</code>, et dans le cas contraire, MkDocs demande de l'activer explicitement.</p> <p>Plus d'informations sur les plugins se trouvent dans la documentation MkDocs.</p>"},{"location":"#usage","title":"Usage","text":"<p>Voir la section Guide d'utilisation</p>"},{"location":"#licence","title":"Licence","text":"<p>Voir la licence</p>"},{"location":"#voir-aussi","title":"Voir aussi","text":"<p>Plus d'informations sur les templates ici.</p> <p>Plus d'informations sur les blocs ici.</p>"},{"location":"licence/","title":"Mkdocs-sqlite-console plugin","text":"<p>Copyright (c) 2022 Rafa\u00ebl Lopez</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"licence/#sqljs-code","title":"SQL.js code","text":"<p>Copyright (c) 2017 sql.js authors (see https://github.com/sql-js/sql.js/blob/master/AUTHORS)</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"licence/#favicon","title":"Favicon","text":"<p>Sql icon created by juicy_fish - Flaticon</p>"},{"location":"notes-de-version/","title":"Historique des versions","text":""},{"location":"notes-de-version/#100","title":"1.0.0","text":"<ul> <li>Version initiale.</li> </ul>"},{"location":"notes-de-version/#101","title":"1.0.1","text":"<ul> <li>Correction de probl\u00e8mes de chemins.</li> <li>Documentation compl\u00e9t\u00e9e.</li> </ul>"},{"location":"notes-de-version/#101a","title":"1.0.1a","text":"<ul> <li>Inclusion des fichiers css/* et js/* dans l'installation.</li> </ul>"},{"location":"notes-de-version/#102","title":"1.0.2","text":"<ul> <li>Cohabitation possible avec le plugin <code>macros</code>.</li> <li>La commande <code>mkdocs build</code> requiert explicitement que <code>site_url</code> soit configur\u00e9.</li> </ul>"},{"location":"notes-de-version/#103","title":"1.0.3","text":"<ul> <li>Possibilit\u00e9 de partager un worker entre plusieurs IDE pour ex\u00e9cuter diff\u00e9rentes s\u00e9quences sur la m\u00eame BDD.</li> </ul>"},{"location":"notes-de-version/#104","title":"1.0.4","text":"<ul> <li>Possibilit\u00e9 d'autoex\u00e9cuter le code sql pr\u00e9-saisi dans la console.</li> </ul>"},{"location":"notes-de-version/#104b","title":"1.0.4b","text":"<ul> <li>Petite modification d'un message pour clarifier que la requ\u00eate n'e renvoie pas de r\u00e9sultat.</li> </ul>"},{"location":"notes-de-version/#104c","title":"1.0.4c","text":"<ul> <li>Modification de l'injection des scripts/CSS pour que le CSS puisse \u00eatre customis\u00e9.</li> </ul>"},{"location":"notes-de-version/#105","title":"1.0.5","text":"<ul> <li>Possibilit\u00e9 de cacher l'IDE pour ne garder que les r\u00e9sultats des requ\u00eates</li> </ul>"},{"location":"notes-de-version/#105a","title":"1.0.5a","text":"<ul> <li>Correction d'un probl\u00e8me d'affichage si pyodide-mkdocs est utilis\u00e9.</li> </ul>"},{"location":"notes-de-version/#105b","title":"1.0.5b","text":"<ul> <li>Dirty Fix (merci F. Zinelli) pour rendre le plugin compatible avec pyodide-mkdocs-theme.</li> </ul>"},{"location":"notes-de-version/#106","title":"1.0.6","text":"<ul> <li>Publi\u00e9 sur PyPi</li> </ul>"},{"location":"notes-de-version/#107","title":"1.0.7","text":"<ul> <li>Correction d'un oubli dans pyproject.toml (d\u00e9pendance manquante pour faire la documentation locale)</li> <li>Correction de typos.</li> </ul>"},{"location":"notes-de-version/#200","title":"2.0.0","text":"<ul> <li>Support pour utilisation en tant que macro {{ sqlide(...) }}</li> </ul>"},{"location":"usage/","title":"Utilisation","text":""},{"location":"usage/#activer-le-plugin","title":"Activer le plugin","text":"<p>Ajouter dans votre fichier <code>mkdocs.yml</code>:</p> <pre><code>plugins:\n  - search\n  - sqlite-console\n</code></pre> <p>Note</p> <p>Si vous n'avez aucune entr\u00e9e dans la section <code>plugins</code> de votre fichier de configuration, vous voudrez sans doute ajouter le plugin <code>search</code>. MkDocs l'active par d\u00e9faut s'il n'y a pas d'autres <code>plugins</code>, et dans le cas contraire, MkDocs demande de l'activer explicitement.</p> <p>Utilisation avec <code>mkdocs-macros-plugin</code> ou Pyodide-MkDocs-Theme</p> <p>Noter que le plugin <code>mkdocs-sqlite-console</code> doit toujours \u00eatre r\u00e9f\u00e9renc\u00e9 apr\u00e8s les plugins de PMT ou des macros, dans le fichier <code>mkdocs.yml</code> :</p> <pre><code>plugins:\n    - search\n    - macros            # avec mkdocs-macros-plugin\n    - sqlite-console\n</code></pre> <pre><code>plugins:\n    - search\n    - pyodide_macros    # avec PMT\n    - sqlite-console\n</code></pre> <p>Si vous voulez d\u00e9ployer votre site (\u00e0 l'aide de <code>mkdocs build</code> ou <code>mkdocs gh-deploy</code>), il faut \u00e9galement ajouter \u00e0 votre fichier <code>mkdocs.yml</code> une ligne du type</p> <pre><code>site_url: https://monsite.url/chemin\n</code></pre> <p>Par exemple, ce site est configur\u00e9 avec</p> <pre><code>site_url: https://epithumia.github.io/mkdocs-sqlite-console\n</code></pre> <p>site_url</p> <p>Si vous n'avez pas d\u00e9fini la variable <code>site_url</code> dans votre fichier <code>mkdocs.yml</code>, les commandes <code>mkdocs build</code> et <code>mkdocs gh-deploy</code> ne fonctionneront pas et signaleront la n\u00e9cessit\u00e9 de le faire.</p>"},{"location":"usage/#afficher-la-consoleide","title":"Afficher la console/IDE","text":""},{"location":"usage/#parametres","title":"Param\u00e8tres","text":"<p>On peut afficher une console/IDE SQLite gr\u00e2ce \u00e0 la commande <code>{{ sqlide param\u00e8tres }}</code>. Cette commande accepte quatre param\u00e8tres, tous optionnels :</p> <ul> <li>un <code>titre</code> : par exemple <code>titre=\"Exercice 1\"</code>. Par d\u00e9faut, le titre est \"sql\"</li> <li>un chemin vers un script SQL d'initialisation, <code>init</code> : par exemple <code>init=sql/init.md</code></li> <li>un chemin vers une <code>base</code> SQLite : par exemple <code>bases/test.db</code></li> <li>un chemin vers un fichier de code <code>sql</code> pr\u00e9-saisi dans l'IDE : par exemple <code>sql=\"sql/code.sql\"</code></li> <li>si le mot clef <code>autoexec</code> est pr\u00e9sent, alors le contenu de code sera ex\u00e9cut\u00e9 comme si l'utilisateur avait cliqu\u00e9 le bouton</li> </ul> <p>Astuce</p> <p>A part pour le titre, les apostrophes ou guillemets sont optionnels. Ainsi, <code>sql=\"sql/code.sql\"</code>, <code>sql='sql/code.sql'</code> et <code>sql=sql/code.sql</code> sont \u00e9quivalents.</p> <p>Attention</p> <ul> <li>le titre doit \u00eatre entre guillemets</li> <li>les chemins vers les fichiers sont relatifs \u00e0 la racine du site</li> <li>les chemins ne peuvent pas contenir d'espace</li> <li>les options base et init sont mutuellement exclusives ; l'option base est prioritaire.</li> </ul> <p>Voir le cas des utilisations en tant que macro, o\u00f9 les syntaxes diff\u00e8rent l\u00e9g\u00e8rement.</p>"},{"location":"usage/#quelques-exemples","title":"Quelques exemples","text":""},{"location":"usage/#affichage-basique","title":"Affichage basique","text":"<p>Pour afficher un IDE avec du code SQL d'initialisation et du code pr\u00e9-saisi :</p> <pre><code>{{ sqlide titre=\"IDE avec initialisation et code pr\u00e9-saisi\" init=\"sql/init1.sql\" sql=\"sql/code.sql\" }}\n</code></pre> <p>On obtient l'affichage ci-dessous :</p> IDE avec initialisation et code pr\u00e9-saisi SELECT * FROM employees;  SELECT COUNT(*) FROM employees;  Ex\u00e9cuter <pre></pre> <p>On peut aussi charger une base directement :</p> <pre><code>{{sqlide titre=\"IDE avec une base binaire charg\u00e9e et code pr\u00e9-saisi autoex\u00e9cut\u00e9\" base=\"bases/test.db\" sql=\"sql/code.sql\" autoexec}}\n</code></pre> IDE avec une base binaire charg\u00e9e et code pr\u00e9-saisi autoex\u00e9cut\u00e9 SELECT * FROM employees;  SELECT COUNT(*) FROM employees;  Ex\u00e9cuter <pre></pre>"},{"location":"usage/#cacher-lide","title":"Cacher l'IDE","text":"<p>Si l'on ne veut que le r\u00e9sultat de la requ\u00eate sans pour autant afficher l'IDE, il suffit d'ajouter l'option hide :</p> <pre><code>{{sqlide titre=\"IDE avec une base binaire charg\u00e9e et code pr\u00e9-saisi autoex\u00e9cut\u00e9, IDE cach\u00e9\" base=\"bases/test.db\" sql=\"sql/code.sql\" autoexec hide}}\n</code></pre> Sql SELECT * FROM employees;  SELECT COUNT(*) FROM employees;  Ex\u00e9cuter <pre></pre> <p>Titre</p> <p>Attention, le titre n'est plus affich\u00e9 dans ce cas.</p>"},{"location":"usage/#base-partagee-entre-plusieurs-consoles","title":"Base partag\u00e9e entre plusieurs consoles","text":"<p>Il est possible de donner un argument suppl\u00e9mentaire pour partager une base entre plusieurs consoles/IDE :</p> <pre><code>{{ sqlide titre=\"IDE avec initialisation dans l'espace bdd1\" init=\"sql/init1.sql\" espace=\"bdd1\" }}\n\n{{ sqlide titre=\"IDE sans initialisation, avec code pr\u00e9-saisi, dans l'espace bdd1\" sql=\"sql/code.sql\" espace=bdd1}}\n</code></pre> IDE avec initialisation dans l'espace bdd1 Ex\u00e9cuter <pre></pre> IDE sans initialisation, avec code pr\u00e9-saisi, dans l'espace bdd1 SELECT * FROM employees;  SELECT COUNT(*) FROM employees;  Ex\u00e9cuter <pre></pre>"},{"location":"usage/#utilisation-dans-les-admonitions-de-mkdocs-material","title":"Utilisation dans les admonitions de mkdocs-material","text":"<p>On peut appeler le code \u00e0 l'int\u00e9rieur d'une admonition :</p> <pre><code>!!! sql \"Bloc admonition avec initialisation et code pr\u00e9-saisi\"\n    {{ sqlide titre=\"Init + Code\" init=\"sql/init1.sql\" sql=\"sql/code.sql\" }}\n</code></pre> <p>donne :</p> <p>Bloc admonition avec initialisation et code pr\u00e9-saisi</p> Init + Code SELECT * FROM employees;  SELECT COUNT(*) FROM employees;  Ex\u00e9cuter <pre></pre> <pre><code>???+ sql \"Bloc accord\u00e9on avec initialisation et code pr\u00e9-saisi\"\n    {{ sqlide titre=\"Init + Code\" init=\"sql/init1.sql\" sql=\"sql/code.sql\" }}\n</code></pre> <p>donne :</p> Bloc accord\u00e9on avec initialisation et code pr\u00e9-saisi Init + Code SELECT * FROM employees;  SELECT COUNT(*) FROM employees;  Ex\u00e9cuter <pre></pre>"},{"location":"usage/#as-macros","title":"Usage avec le plugin des macros MkDocs ou Pyodide-MkDocs-Theme","text":"<p><code>mkdocs-sqlite-console</code> est compatible avec l'utilisation du plugin <code>mkdocs-macros-plugin</code>, ainsi que le th\u00e8me Pyodide-MkDocs-Theme.</p> <p>Si l'un des deux est utilis\u00e9 (avec une manipulation de configuration \u00e0 faire pour le plugin des macros seul), il est alors possible de d\u00e9clarer un <code>sqlide</code> via un appel de macro :</p> <pre><code>{{ sqlide(titre=\"Init + Code\", init=\"sql/init1.sql\", sql=\"sql/code.sql\") }}\n</code></pre>"},{"location":"usage/#syntaxes","title":"Syntaxes","text":"<p>Par rapport \u00e0 l'utilisation normale du plugin, il faut :</p> <ul> <li>Ajouter les parenth\u00e8ses autour des arguments,</li> <li>Ajouter des virgules entre les arguments,</li> <li>Les guillemets autour des valeurs des arguments sont alors indispensables.</li> <li>Les arguments pass\u00e9s sous forme de cha\u00eenes de caract\u00e8res seule, dans la syntaxe originale (<code>autoexec</code>, <code>hide</code>), doivent \u00eatre pass\u00e9s sous forme de bool\u00e9ens. On peut aussi utiliser des entiers pour raccourcir les d\u00e9claration : <code>0</code> ou <code>1</code>.</li> </ul> Signature exacte de la macro <p>Voici la d\u00e9claration exacte de la macro, et les valeurs par d\u00e9faut associ\u00e9es aux diff\u00e9rents arguments :</p> <pre><code>sqlide(\n    self,\n    titre='Sql',\n    sql='',\n    espace=None,\n    *,\n    base='/',\n    init='',\n    hide=False,\n    autoexec=False,\n)\n</code></pre> <ul> <li> <p>Les trois premiers arguments, <code>titre</code>, <code>sql</code> et <code>espace</code> sont des arguments positionnels avec des valeurs par d\u00e9faut : il n'est pas obligatoire de mettre le nom de l'argument (mais dans ce cas, il faut respecter l'ordre de d\u00e9claration).</p> </li> <li> <p>Les arguments apr\u00e8s <code>*,</code> sont des arguments nomm\u00e9s. Ils doivent imp\u00e9rativement \u00eatre renseign\u00e9s en pr\u00e9cisant le nom de l'argument.</p> </li> <li> <p>Il est toujours possible de renseigner les noms des arguments positionnels si on le souhaite (dans ce cas, il n'est pas indispensable de respecter leur ordre dans la d\u00e9claration).</p> </li> </ul> <p></p> <p>L'appel de l'exemple ci-dessus peut donc \u00e9galement se faire comme suit :</p> <pre><code>{{ sqlide(\"Init + Code\", \"sql/code.sql\", init=\"sql/init1.sql\") }}\n</code></pre> Anciennes syntaxes - versions 1.0.7 et ant\u00e9rieures <p>Ceci d\u00e9crit les anciens comportements pour utiliser <code>mkdocs-sqlite-console</code> avec le plugin des macros ou PMT activ\u00e9s. Ces m\u00e9thodes restent utilisables.</p> <p>Le plugin <code>macros</code> utilise les doubles accolades pour d\u00e9finir ses propres blocs de code, ce qui emp\u00eache ce plugin de fonctionner normalement. En cons\u00e9quence, quand le plugin macros est d\u00e9tect\u00e9, la syntaxe change et l'IDE SQLite est charg\u00e9e avec la syntaxe suivante :</p> <pre><code>{!{ sqlide param\u00e8tres }!}\n</code></pre> <p>Par exemple, l'appel :</p> <pre><code>{{ sqlide titre=\"...\" init=\"sql/init1.sql\" sql=\"sql/code.sql\" }}\n</code></pre> <p>...devait alors s'\u00e9crire :</p> <p><code>{!{ sqlide titre=\"...\" init=\"sql/init1.sql\" sql=\"sql/code.sql\" }!}</code></p>"},{"location":"usage/#activation","title":"Activation","text":""},{"location":"usage/#pyodide-mkdocs-theme","title":"<code>Pyodide-MkDocs-Theme</code>","text":"<p>Le th\u00e8me g\u00e8re tout automatiquement, \u00e0 partir de sa version 4.4.6.</p> <p>Les versions ant\u00e9rieures n\u00e9cessitent d'utiliser les anciennes syntaxes de d\u00e9claration des <code>sqlide</code>, ou de mettre en place la logistique d\u00e9crite ci-dessous pour <code>mkdocs-macros-plugin</code>.</p>"},{"location":"usage/#mkdocs-macros-plugin","title":"<code>mkdocs-macros-plugin</code>","text":"<p>Dans le cas de l'utilisation du plugin des macros seul, il est n\u00e9cessaire d'enregistrer la macro depuis votre fichier/module de macros personnalis\u00e9es.</p> <p>Par d\u00e9faut, il s'agit du fichier <code>main.py</code> :</p> <pre><code>def define_env(env):\n\n    # Vos macros personnalis\u00e9es ici:\n    ...\n\n    # Enregistrement de la macro sqlide:\n    sql_plugin = env._conf.plugins['sqlite-console']\n    env.macro(sql_plugin.sqlide)\n</code></pre>"},{"location":"usage/#erreurs","title":"Erreurs","text":"<p>Le plugin d\u00e9tectera les fichiers non existants :</p> <pre><code>{{sqlide titre=\"Erreur fichier base manquant\" base=bases/basem.db sql=sql/code1.sql }}\n</code></pre> Erreur fichier base manquant -- Fichier de base 'bases/basem.db' introuvable Ex\u00e9cuter <pre></pre> <pre><code>{{sqlide titre=\"Erreur fichier sql manquant\" init=sql/initm.sql sql=sql/codem.sql }}\n</code></pre> Erreur fichier sql manquant -- Fichier d'initialisation 'sql/initm.sql' introuvable Ex\u00e9cuter <pre></pre>"}]}